<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MongoDB_BREADS</title>

    <link rel="stylesheet" href="/fontawesome/css/all.css">
    <link rel="stylesheet" href="/stylesheets/bootstrap.css">
    <link rel="stylesheet" href="/stylesheets/style.css">
</head>

<body>

    <div class="card">
        <div class="card-header">
            <h2>Filter</h2>
        </div>
        <div class="card-body">
            <form action="" method="get">
                <input type="hidden" name="page" value="1" />
                <input type="hidden" name="sortBy" value="id" />
                <input type="hidden" name="sortMode" value="asc" />
                <div class="mb-3 row">
                    <div class="col-sm-2 d-flex align-items-center">
                        <input class="form-check-input mt-0" type="checkbox" id="idcheck" name="idcheck">
                        <label class="col-form-label" for="idcheck">ID</label>
                    </div>
                    <div class="col-sm-10">
                        <input class="form-control" type="number" id="id" name="id" placeholder="ID" value="">
                    </div>
                </div>
                <div class="mb-3 row">
                    <div class="col-sm-2 d-flex align-items-center">
                        <input class="form-check-input mt-0" type="checkbox" id="stringcheck" name="stringcheck">
                        <label class="col-form-label" for="stringcheck">String</label>
                    </div>

                    <div class="col-sm-10">
                        <input class="form-control" type="text" id="string" name="stringdata" placeholder="String"
                            value="">
                    </div>
                </div>
                <div class="mb-3 row">
                    <div class="col-sm-2 d-flex align-items-center">
                        <input class="form-check-input mt-0" type="checkbox" id="integercheck" name="integercheck">
                        <label class="col-form-label" for="integercheck">Integer</label>
                    </div>
                    <div class="col-sm-10">
                        <input class="form-control" type="number" id="integer" name="integerdata" placeholder="Integer"
                            value="">
                    </div>
                </div>
                <div class="mb-3 row">
                    <div class="col-sm-2 d-flex align-items-center">
                        <input class="form-check-input mt-0" type="checkbox" id="floatcheck" name="floatcheck">
                        <label class="col-form-label" for="floatcheck">Float</label>
                    </div>
                    <div class="col-sm-10">
                        <input class="form-control" type="number" id="float" step="any" name="floatdata"
                            placeholder="Float" value="">
                    </div>
                </div>
                <div class="mb-3 row">

                    <div class="col-sm-2 d-flex align-items-center">
                        <input class="form-check-input mt-0" type="checkbox" id="datecheck" name="datecheck">
                        <label class="col-form-label" for="datecheck">Date</label>
                    </div>

                    <div class="col-sm-10">
                        <input class="form-control" type="date" id="date" name="startDate" placeholder="start date"
                            value="">
                        <br>
                        to <br>
                        <input class="form-control" type="date" id="date" name="endDate" placeholder="end date"
                            value="">
                    </div>
                </div>
                <div class="mb-3 row">
                    <div class="col-sm-2 d-flex align-items-center">
                        <input class="form-check-input mt-0" type="checkbox" id="booleancheck" name="booleancheck">
                        <label class="col-form-label" for="booleancheck">Boolean</label>
                    </div>
                    <div class="col-sm-10">
                        <select name="boolean" id="boolean" class="form-control">
                            <option value="" disabled selected hidden>Choose the boolean ...</option>
                            <option value="true">True</option>
                            <option value="false">False</option>
                        </select>
                    </div>
                </div>
                <br>
                <div class="card-footer">
                    <button type="submit" class="btn btn-success"> Search</button>
                </div>
            </form>
        </div>
    </div>

    <br>

    <table class="table table-striped">
        <thead>
            <tr>
                <th>
                    ID
                </th>
                <th>
                    String
                </th>
                <th>
                    Integer
                </th>
                <th>
                    Float
                </th>
                <th>
                    Date
                </th>
                <th>
                    Boolean
                </th>
                <th>
                    Actions
                </th>
            </tr>
        </thead>
        <tbody>


        </tbody>


    </table>


    <br>

    <div class="card-header">
        <h2>Add Data</h2>
    </div>

    <form id="form" action="" method="post">
        <div class="card-body">
            <div class="mb-3 row">
                <div class="col-sm-2 d-flex align-items-center">
                    <label class="col-form-label" for="string">String</label>
                </div>
                <div class="col-sm-10">
                    <input class="form-control" type="text" id="string-add" name="stringdata" placeholder="String" value="">
                </div>
            </div>
            <div class="mb-3 row">
                <div class="col-sm-2 d-flex align-items-center">
                    <label class="col-form-label" for="integer">Integer</label>
                </div>
                <div class="col-sm-10">
                    <input class="form-control" type="number" id="integer-add" name="integerdata" placeholder="Integer" value="">
                </div>
            </div>
            <div class="mb-3 row">
                <div class="col-sm-2 d-flex align-items-center">
                    <label class="col-form-label" for="float">Float</label>
                </div>
                <div class="col-sm-10">
                    <input class="form-control" type="number" id="float-add" step="any" name="floatdata"
                        placeholder="Float" value="">
                </div>
            </div>
            <div class="mb-3 row">
                <div class="col-sm-2 d-flex align-items-center">
                    <label class="col-form-label" for="date">Date</label>
                </div>
                <div class="col-sm-10">
                    <input class="form-control" type="date" id="date-add" name="datedata" placeholder="end date" value="">
                </div>
            </div>
            <div class="mb-3 row">
                <div class="col-sm-2 d-flex align-items-center">
                    <label class="col-form-label" for="boolean">Boolean</label>
                </div>
                <div class="col-sm-10">
                    <select class="form-control" name="boolean" id="boolean-add">
                        <option value="" disabled selected hidden>Choose the boolean ...</option>
                        <option value="true">True</option>
                        <option value="false">False</option>
                    </select>
                </div>
            </div>
            <br>
            <div>
                <input class="btn btn-success" type="submit" value="Save">
            </div>
        </div>
    </form>

    <script>
        const readData = () => {
            fetch("http://localhost:3000/api")
                .then((response) => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! Status: ${response.status}`);
                    }

                    return response.json();
                })
                .then((response) => {
                    let html = ''
                    response.data.forEach((item, index) => {
                        html += `
                        <tr>
                    <td>${index + 1}</td>
                    <td>${item.stringdata}</td>
                    <td>${item.integerdata}</td>
                    <td>${item.floatdata}</td>
                    <td>${item.datedata}</td>
                    <td>${item.boolean}</td>
                    <td>
                        <a class="btn btn-success btn-sm" href=""><i class="fa-solid fa-pencil"></i></a>
                        <a class="btn btn-danger btn-sm" onClick="deleteData('${item._id}')" href=""><i class="fa-solid fa-trash"></i></a>    
                    </td>
                        </tr>
                    `
                    });
                    document.querySelector('table tbody').innerHTML = html
                });
        }


        const createData = (stringdata, integerdata, floatdata, datedata, boolean) => {
            fetch("http://localhost:3000/api/add", {
                method: 'POST',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ stringdata, integerdata, floatdata, datedata, boolean })
            })
                .then((response) => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! Status: ${response.status}`);
                    }

                    return response.json();
                })
                .then((response) => {
                    readData()
                    document.getElementById('form').reset()
                })
        }

        const deleteData = (id) => {
            fetch(`http://localhost:3000/api/${id}`, {
                method: 'DELETE',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                }
            })
                .then((response) => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! Status: ${response.status}`);
                    }

                    return response.json();
                })
                .then((response) => {
                    readData()
                })
        }

        readData()

        document.getElementById('form').addEventListener('submit', function (event) {
            event.preventDefault()
            const stringdata = document.getElementById('string-add').value
            const integerdata = document.getElementById('integer-add').value
            const floatdata = document.getElementById('float-add').value
            const datedata = document.getElementById('date-add').value
            const boolean = document.getElementById('boolean-add').value
            createData(stringdata, integerdata, floatdata, datedata, boolean)
        })
    </script>
</body>

</html>